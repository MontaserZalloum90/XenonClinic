@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@model XenonClinic.Web.Models.Admin.TenantSettingsFormViewModel
@{
    ViewData["Title"] = Localizer["TenantSettings"];
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h4 class="mb-0">@Localizer["TenantSettings"]</h4>
        <small class="text-muted">@Model.TenantName</small>
    </div>
    <a asp-action="Index" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left me-1"></i>@Localizer["BackToDashboard"]
    </a>
</div>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<form asp-action="Settings" method="post">
    <input type="hidden" asp-for="TenantId" />
    <input type="hidden" asp-for="TenantName" />

    <div class="row g-4">
        <div class="col-lg-6">
            <div class="card card-rounded">
                <div class="card-body">
                    <h5 class="card-title mb-3">@Localizer["RegionalSettings"]</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="DefaultLanguage" class="form-label">@Localizer["DefaultLanguage"]</label>
                            <select asp-for="DefaultLanguage" class="form-select">
                                <option value="en">English</option>
                                <option value="ar">Arabic</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="DefaultCurrency" class="form-label">@Localizer["DefaultCurrency"]</label>
                            <select asp-for="DefaultCurrency" class="form-select">
                                <option value="AED">AED - UAE Dirham</option>
                                <option value="USD">USD - US Dollar</option>
                                <option value="EUR">EUR - Euro</option>
                                <option value="SAR">SAR - Saudi Riyal</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="DateFormat" class="form-label">@Localizer["DateFormat"]</label>
                            <select asp-for="DateFormat" class="form-select">
                                <option value="dd/MM/yyyy">dd/MM/yyyy</option>
                                <option value="MM/dd/yyyy">MM/dd/yyyy</option>
                                <option value="yyyy-MM-dd">yyyy-MM-dd</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="TimeFormat" class="form-label">@Localizer["TimeFormat"]</label>
                            <select asp-for="TimeFormat" class="form-select">
                                <option value="HH:mm">24-hour (HH:mm)</option>
                                <option value="hh:mm tt">12-hour (hh:mm AM/PM)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card card-rounded">
                <div class="card-body">
                    <h5 class="card-title mb-3">@Localizer["InvoiceSettings"]</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="InvoicePrefix" class="form-label">@Localizer["InvoicePrefix"]</label>
                            <input asp-for="InvoicePrefix" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="QuotationPrefix" class="form-label">@Localizer["QuotationPrefix"]</label>
                            <input asp-for="QuotationPrefix" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="SalePrefix" class="form-label">@Localizer["SalePrefix"]</label>
                            <input asp-for="SalePrefix" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="PurchaseOrderPrefix" class="form-label">@Localizer["POPrefix"]</label>
                            <input asp-for="PurchaseOrderPrefix" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="DefaultTaxRate" class="form-label">@Localizer["DefaultTaxRate"] (%)</label>
                            <input asp-for="DefaultTaxRate" type="number" step="0.01" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <div class="form-check mt-4">
                                <input asp-for="ShowTaxOnInvoice" class="form-check-input" type="checkbox" />
                                <label asp-for="ShowTaxOnInvoice" class="form-check-label">@Localizer["ShowTaxOnInvoice"]</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card card-rounded">
                <div class="card-body">
                    <h5 class="card-title mb-3">@Localizer["AppointmentSettings"]</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="DefaultAppointmentDurationMinutes" class="form-label">@Localizer["DefaultDuration"] (@Localizer["Minutes"])</label>
                            <input asp-for="DefaultAppointmentDurationMinutes" type="number" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="ReminderHoursBeforeAppointment" class="form-label">@Localizer["ReminderHours"]</label>
                            <input asp-for="ReminderHoursBeforeAppointment" type="number" class="form-control" />
                        </div>
                        <div class="col-12">
                            <div class="form-check">
                                <input asp-for="SendAppointmentReminders" class="form-check-input" type="checkbox" />
                                <label asp-for="SendAppointmentReminders" class="form-check-label">@Localizer["SendReminders"]</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-check">
                                <input asp-for="EnableOnlineBooking" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableOnlineBooking" class="form-check-label">@Localizer["EnableOnlineBooking"]</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card card-rounded">
                <div class="card-body">
                    <h5 class="card-title mb-3">@Localizer["BusinessSettings"]</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="ExpenseApprovalThreshold" class="form-label">@Localizer["ExpenseApprovalThreshold"]</label>
                            <input asp-for="ExpenseApprovalThreshold" type="number" step="0.01" class="form-control" />
                        </div>
                        <div class="col-12">
                            <div class="form-check">
                                <input asp-for="RequireApprovalForExpenses" class="form-check-input" type="checkbox" />
                                <label asp-for="RequireApprovalForExpenses" class="form-check-label">@Localizer["RequireExpenseApproval"]</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-check">
                                <input asp-for="EnableMultiCurrency" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableMultiCurrency" class="form-check-label">@Localizer["EnableMultiCurrency"]</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-check">
                                <input asp-for="EnableMultiLanguage" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableMultiLanguage" class="form-check-label">@Localizer["EnableMultiLanguage"]</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12">
            <div class="card card-rounded">
                <div class="card-body">
                    <h5 class="card-title mb-3">@Localizer["ModuleAccess"]</h5>
                    <div class="row g-3">
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnableLabModule" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableLabModule" class="form-check-label">@Localizer["LabModule"]</label>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnableInventoryModule" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableInventoryModule" class="form-check-label">@Localizer["InventoryModule"]</label>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnableHRModule" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableHRModule" class="form-check-label">@Localizer["HRModule"]</label>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnableFinanceModule" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableFinanceModule" class="form-check-label">@Localizer["FinanceModule"]</label>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnableProcurementModule" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableProcurementModule" class="form-check-label">@Localizer["ProcurementModule"]</label>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnableSalesModule" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableSalesModule" class="form-check-label">@Localizer["SalesModule"]</label>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnableAnalyticsModule" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableAnalyticsModule" class="form-check-label">@Localizer["AnalyticsModule"]</label>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="form-check">
                                <input asp-for="EnablePatientPortal" class="form-check-input" type="checkbox" />
                                <label asp-for="EnablePatientPortal" class="form-check-label">@Localizer["PatientPortal"]</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12">
            <div class="card card-rounded">
                <div class="card-body">
                    <h5 class="card-title mb-3">@Localizer["AuditSettings"]</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="form-check">
                                <input asp-for="EnableAuditLogging" class="form-check-input" type="checkbox" />
                                <label asp-for="EnableAuditLogging" class="form-check-label">@Localizer["EnableAuditLogging"]</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="AuditLogRetentionDays" class="form-label">@Localizer["AuditRetentionDays"]</label>
                            <input asp-for="AuditLogRetentionDays" type="number" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-4 d-flex gap-2">
        <button type="submit" class="btn btn-primary">
            <i class="bi bi-check-circle me-1"></i>@Localizer["SaveSettings"]
        </button>
        <a asp-action="Index" class="btn btn-outline-secondary">@Localizer["Cancel"]</a>
    </div>
</form>
